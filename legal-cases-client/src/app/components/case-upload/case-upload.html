<div class="upload-page">
  <!-- Hero Section -->
  <div class="hero-section">
    <div class="hero-container">
      <div class="hero-title">
        <mat-icon>cloud_upload</mat-icon>
        <h1>העלאת פסק דין חדש</h1>
      </div>
      <p class="hero-subtitle">הזן את פרטי פסק הדין והעלה קובץ טקסט לאינדוקס</p>
    </div>
  </div>

  <!-- Content Section -->
  <div class="content-section">
    <div class="container">
      <!-- Success Alert -->
      <div class="alert alert-success" *ngIf="uploadSuccess">
        <mat-icon>check_circle</mat-icon>
        <div>
          <strong>העלאה הושלמה בהצלחה!</strong>
          <p>פסק הדין נוסף למערכת ונשמר בהצלחה</p>
        </div>
      </div>

      <!-- Error Alert -->
      <div class="alert alert-error" *ngIf="uploadError">
        <mat-icon>error_outline</mat-icon>
        <div>
          <strong>שגיאה בהעלאה</strong>
          <p>{{ uploadError }}</p>
        </div>
      </div>

      <!-- Upload Form -->
      <form [formGroup]="uploadForm" (ngSubmit)="onSubmit()" class="upload-form">
        <!-- Required Fields Section -->
        <div class="form-section">
          <h2 class="section-title">
            <mat-icon>info</mat-icon>
            שדות חובה
          </h2>

          <div class="form-field-wrapper full-width">
            <label class="field-label">כתובת URL מקורית *</label>
            <input
              type="url"
              class="custom-input"
              formControlName="source_url"
              placeholder="לדוגמה: https://example.com/decisions/12345"
            />
            <small>קישור למקור המקורי של פסק הדין</small>
          </div>
        </div>

        <!-- Basic Info Section -->
        <div class="form-section">
          <h2 class="section-title">
            <mat-icon>description</mat-icon>
            פרטים כלליים
          </h2>

          <div class="form-row">
            <div class="form-field-wrapper">
              <label class="field-label">מספר תיק</label>
              <input
                type="text"
                class="custom-input"
                formControlName="case_number"
                placeholder="לדוגמה: עא 1234/20"
              />
            </div>

            <div class="form-field-wrapper">
              <label class="field-label">מזהה קצר (slug)</label>
              <input
                type="text"
                class="custom-input"
                formControlName="source_slug"
                placeholder="לדוגמה: ea-1234-20"
              />
            </div>
          </div>

          <div class="form-field-wrapper full-width">
            <label class="field-label">כותרת פסק הדין</label>
            <input
              type="text"
              class="custom-input"
              formControlName="decision_title"
              placeholder="לדוגמה: פלוני נגד אלמוני"
            />
          </div>

          <div class="form-row">
            <div class="form-field-wrapper">
              <label class="field-label">שם בית משפט</label>
              <input
                type="text"
                class="custom-input"
                formControlName="court_name"
                placeholder="לדוגמה: בית המשפט העליון"
              />
            </div>

            <div class="form-field-wrapper">
              <label class="field-label">רמת בית משפט</label>
              <select class="custom-input" formControlName="court_level">
                <option value="">בחר רמה</option>
                <option *ngFor="let level of courtLevels" [value]="level">{{ level }}</option>
              </select>
            </div>
          </div>

          <div class="form-row">
            <div class="form-field-wrapper">
              <label class="field-label">סוג החלטה</label>
              <select class="custom-input" formControlName="decision_type">
                <option value="">בחר סוג</option>
                <option *ngFor="let type of decisionTypes" [value]="type">{{ type }}</option>
              </select>
            </div>

            <div class="form-field-wrapper">
              <label class="field-label">סטטוס</label>
              <select class="custom-input" formControlName="status">
                <option *ngFor="let status of statusOptions" [value]="status">{{ status }}</option>
              </select>
            </div>
          </div>

          <div class="form-row">
            <div class="form-field-wrapper">
              <label class="field-label">תאריך החלטה</label>
              <input
                type="date"
                class="custom-input"
                formControlName="decision_date"
              />
            </div>

            <div class="form-field-wrapper">
              <label class="field-label">תאריך פרסום</label>
              <input
                type="date"
                class="custom-input"
                formControlName="publish_date"
              />
            </div>
          </div>

          <div class="form-field-wrapper full-width">
            <label class="field-label">תקציר</label>
            <textarea
              class="custom-input"
              formControlName="summary_text"
              rows="4"
              placeholder="תקציר קצר של פסק הדין"
            ></textarea>
          </div>

          <div class="form-row">
            <div class="form-field-wrapper">
              <label class="field-label">מילות מפתח</label>
              <input
                type="text"
                class="custom-input"
                formControlName="keywords"
                placeholder="מילות מפתח מופרדות בפסיקים"
              />
            </div>

            <div class="form-field-wrapper">
              <label class="field-label">שפה</label>
              <select class="custom-input" formControlName="language_code">
                <option value="he">עברית</option>
                <option value="en">English</option>
                <option value="ar">العربية</option>
              </select>
            </div>
          </div>
        </div>

        <!-- File Upload Section -->
        <div class="form-section">
          <h2 class="section-title">
            <mat-icon>attach_file</mat-icon>
            קובץ טקסט לאינדוקס (אופציונלי)
          </h2>

          <div
            class="file-upload-area"
            [class.drag-over]="isDragging"
            (dragover)="onDragOver($event)"
            (dragleave)="onDragLeave($event)"
            (drop)="onDrop($event)"
            (click)="fileInput.click()"
          >
            <input
              #fileInput
              type="file"
              accept=".txt"
              (change)="onFileSelected($event)"
              style="display: none"
            />

            <div class="upload-content" *ngIf="!selectedFile">
              <mat-icon>cloud_upload</mat-icon>
              <h3>גרור קובץ טקסט לכאן או לחץ לבחירה</h3>
              <p>קבצים נתמכים: TXT בלבד (עד 50MB)</p>
              <small>הטקסט יעבור אינדוקס אוטומטי למילים וביטויים</small>
            </div>

            <div class="file-preview" *ngIf="selectedFile">
              <mat-icon>description</mat-icon>
              <div class="file-info">
                <strong>{{ selectedFile.name }}</strong>
                <span>{{ formatFileSize(selectedFile.size) }}</span>
              </div>
              <button type="button" mat-icon-button (click)="removeFile(); $event.stopPropagation()">
                <mat-icon>close</mat-icon>
              </button>
            </div>
          </div>
        </div>

        <!-- Submit Button -->
        <div class="form-actions">
          <button type="submit" mat-raised-button color="primary" [disabled]="!uploadForm.valid || uploading">
            <mat-icon *ngIf="!uploading">upload</mat-icon>
            <mat-spinner diameter="20" *ngIf="uploading"></mat-spinner>
            {{ uploading ? 'מעלה...' : 'העלה פסק דין' }}
          </button>
          <button type="button" mat-button (click)="resetForm()" [disabled]="uploading">
            <mat-icon>refresh</mat-icon>
            אפס טופס
          </button>
        </div>
      </form>
    </div>
  </div>
</div>
