<div class="words-index-page">
  <div class="hero-section">
    <div class="hero-container">
      <div class="hero-title">
        <mat-icon>list</mat-icon>
        <h1>אינדקס מילים</h1>
      </div>
      <p class="hero-subtitle">אינדקס מילים עבור פסק דין ספציפי</p>
    </div>
  </div>

  <div class="content-section">
    <div class="container">
      <!-- Filters Section -->
      <div class="form-section">
        <h2 class="section-title">
          <mat-icon>filter_list</mat-icon>
          הגדרות אינדקס
        </h2>

        <div class="form-row">
          <div class="form-field-wrapper">
            <label class="field-label">מזהה פסק דין *</label>
            <input
              type="number"
              class="custom-input"
              [(ngModel)]="decisionId"
              placeholder="לדוגמה: 5"
            />
          </div>

          <div class="form-field-wrapper">
            <label class="field-label">מיון</label>
            <select class="custom-input" [(ngModel)]="orderBy">
              <option value="alpha">אלפביתי</option>
              <option value="freq">לפי תדירות</option>
            </select>
          </div>

          <div class="form-field-wrapper">
            <label class="field-label">מקסימום מילים</label>
            <input
              type="number"
              class="custom-input"
              [(ngModel)]="limit"
              min="1"
              max="10000"
            />
          </div>
        </div>

        <div *ngIf="error" class="alert alert-error">
          <mat-icon>error_outline</mat-icon>
          <div>
            <strong>שגיאה בטעינת אינדקס</strong>
            <p>{{ error }}</p>
          </div>
        </div>

        <div class="form-actions">
          <button mat-raised-button color="primary" (click)="loadWordIndex()" [disabled]="loading || !decisionId">
            <mat-icon *ngIf="!loading">search</mat-icon>
            <mat-spinner diameter="20" *ngIf="loading"></mat-spinner>
            {{ loading ? 'טוען...' : 'טען אינדקס' }}
          </button>
        </div>
      </div>

      <!-- Results Section -->
      <div *ngIf="wordIndex.length > 0 && !loading" class="form-section">
        <h2 class="section-title">
          <mat-icon>list</mat-icon>
          אינדקס מילים ({{ wordIndex.length }} מילים)
        </h2>

        <div class="table-container">
          <table mat-table [dataSource]="wordIndex" class="words-table">
            <!-- Index Column -->
            <ng-container matColumnDef="index">
              <th mat-header-cell *matHeaderCellDef> # </th>
              <td mat-cell *matCellDef="let element; let i = index"> {{ i + 1 }} </td>
            </ng-container>

            <!-- Word Column -->
            <ng-container matColumnDef="word_text">
              <th mat-header-cell *matHeaderCellDef> מילה </th>
              <td mat-cell *matCellDef="let element"> {{ element.word_text }} </td>
            </ng-container>

            <!-- Count Column -->
            <ng-container matColumnDef="cnt">
              <th mat-header-cell *matHeaderCellDef> מספר מופעים </th>
              <td mat-cell *matCellDef="let element"> {{ element.cnt }} </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
          </table>
        </div>
      </div>

      <!-- Empty State -->
      <div *ngIf="wordIndex.length === 0 && !loading && !error" class="empty-state">
        <mat-icon>list_alt</mat-icon>
        <h3>אין תוצאות להצגה</h3>
        <p>הזן מזהה החלטה וטען אינדקס כדי לראות את רשימת המילים</p>
      </div>
    </div>
  </div>
</div>
